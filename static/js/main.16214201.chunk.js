(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),o=a.n(c),u=(a(39),a(40),a(15)),l=a(8),i=a(3),s=a(4),p=a(6),d=a(5),m=(a(41),a(18)),f=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.onChange,n=e.value;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"search-div"},r.a.createElement("input",{value:n,type:"text",onChange:a,placeholder:"buscar"}),r.a.createElement("button",{className:"search-button",type:"button",onClick:t},r.a.createElement(m.c,null))))}}]),a}(r.a.Component),h=(a(42),a(9)),E=a(14),b=a.n(E),v=a(19);function O(){return y.apply(this,arguments)}function y(){return(y=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,a=t.json(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return j.apply(this,arguments)}function j(){return(j=Object(v.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 2:return n=e.sent,r=n.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){return{type:"GET_CATEGORIES_ERROR",payload:e}},T=function(e){return{type:"GET_PRODUCTS_LIST_ERROR",payload:e}},R=function(e){return{type:"LOGIN",payload:e}},S=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCategories)()}},{key:"render",value:function(){var e=this.props,t=e.categories,a=e.getSelectedCategory;return r.a.createElement("div",null,r.a.createElement("ol",{className:"categories-list"},r.a.createElement("h2",null,"Categorias"),t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("input",{"data-testid":"category",type:"radio",id:e.id,name:"categorias",onClick:function(){return a(e.id)}}),e.name)})),r.a.createElement("br",null)))}}]),a}(r.a.Component),_=Object(h.b)((function(e){var t=e.categoriesReducer;return{categories:t.categories,error:t.error}}),(function(e){return{getCategories:function(){return e(function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:a=e.sent,t({type:"GET_CATEGORIES_SUCCESS",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(C(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},getSelectedCategory:function(t){return e({type:"SELECTED_CATEGORY",payload:t})}}}))(S),k=(a(49),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("div",{className:"spin"}),r.a.createElement("div",null,"Carregando..."))}}]),a}(r.a.Component)),N=(a(50),a(51),a(23));function I(){return JSON.parse(localStorage.getItem("products"))||[]}function A(e){var t=I(),a=[].concat(Object(N.a)(t),[e]);localStorage.setItem("products",JSON.stringify(a))}function D(e){var t=I().filter((function(t){return t.id!==e}));return localStorage.setItem("products",JSON.stringify(t)),t}function P(){return JSON.parse(localStorage.getItem("user"))}var w=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).saveProduct=function(){var t=e.props,a=t.product,n=t.add;a.quantity=1,n(a),A(a)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{type:"button",id:"button-add-to-cart",onClick:this.saveProduct},"Adicione ao carrinho"))}}]),a}(n.Component),L=Object(h.b)(null,(function(e){return{add:function(t){return e({type:"ADD_PRODUCT_TO_CART",payload:t})}}}))(w),x=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.products;return null===e?r.a.createElement("h2",{className:"no-product"},"Nenhum produto foi encontrado"):e?r.a.createElement("div",{className:"products-container"},e.map((function(e){return r.a.createElement("div",{className:"product",key:e.id},r.a.createElement(u.b,{className:"details",to:{pathname:"/produto/".concat(e.id),state:{product:e}}},r.a.createElement("img",{src:e.thumbnail,alt:e.title})),r.a.createElement(u.b,{className:"details",to:{pathname:"/produto/".concat(e.id),state:{product:e}}},r.a.createElement("p",{className:"title"},e.title)),r.a.createElement("p",{className:"price"},"".concat(e.price," R$")),r.a.createElement(L,{product:e}))}))):null}}]),a}(r.a.Component),U=(a(56),a(29)),q=(a(57),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(u.b,{to:"/cart"},r.a.createElement(U.a,{id:"cart"}))}}]),a}(r.a.Component)),G=a(31),M=a(30),F=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.refreshCart,a=e.login;t(I());var n=P();n&&n&&a(n)}},{key:"render",value:function(){var e=this.props,t=e.products,a=e.user;return r.a.createElement("header",null,r.a.createElement("div",{className:"left-container"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"/busca-livre"},r.a.createElement("b",null,r.a.createElement("span",null,"Busca Livre"))))),r.a.createElement("div",null,a.name?"Seja bem-vindo, ".concat(a.name):"Fa\xe7a Login para aproveitar as promo\xe7\xf5es"),r.a.createElement("nav",{className:"right-container"},r.a.createElement("span",null,"Sobre n\xf3s"),r.a.createElement(M.a,null),r.a.createElement(u.b,{to:"/signup"},r.a.createElement(G.a,{className:"sign-in"})),r.a.createElement(q,null),r.a.createElement("span",{className:"products-counter-container"},t.length>0&&r.a.createElement("span",{className:"products-counter"},t.length))))}}]),a}(r.a.Component),Q=Object(h.b)((function(e){return{products:e.cartReducer.products,user:e.userReducer.user}}),(function(e){return{refreshCart:function(t){return e({type:"REFRESH_CART",payload:t})},login:function(t){return e(R(t))}}}))(F),J=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleOnChange=function(t){var a=t.target.value;e.setState({query:a})},e.handleClick=function(){var t=e.props;(0,t.getProductsList)({categoryId:t.categoryId,query:e.state.query})},e.state={query:""},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.props,a=t.products,n=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(f,{value:e,onClick:this.handleClick,onChange:this.handleOnChange}),r.a.createElement(_,{onClick:this.handleRadio}),n&&r.a.createElement(k,null),r.a.createElement(x,{products:a}))}}]),a}(r.a.Component),Y=Object(h.b)((function(e){var t=e.ProductsListReducer;return{products:t.products,loading:t.loading,categoryId:e.categoriesReducer.categoryId}}),(function(e){return{getProductsList:function(t){return e(function(e){var t=e.categoryId,a=e.query;return function(){var e=Object(v.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"GET_PRODUCTS_LIST"}),e.prev=1,e.next=4,g(t,a);case 4:r=e.sent,n((0===(c=r).results.length&&(c.results=null),{type:"GET_PRODUCTS_LIST_SUCCESS",payload:c})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(T(e.t0));case 11:case"end":return e.stop()}var c}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}}}))(J),B=(a(58),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("h2",{className:"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio")}}]),a}(r.a.Component)),$=(a(59),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleOnclick=function(t,a){var n=e.props,r=n.add,c=n.decrease,o=n.itemQuantity;"add"===t?e.checkQuantity()&&r(a):o>1&&c(a)},e.checkQuantity=function(){var t=e.props,a=t.product.available_quantity;if(t.itemQuantity+1<=a)return!0},e.handleDeleteCartItem=function(t){(0,e.props.deleteItem)(t),D(t.id)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.product,n=t.itemQuantity,c=a.title,o=a.price,u=a.thumbnail;return r.a.createElement("div",{className:"cart-item-container"},r.a.createElement("img",{src:u,alt:c}),r.a.createElement("div",{className:"cart-item-info"},r.a.createElement("p",null,c),r.a.createElement("p",null,"".concat(o," R$")),r.a.createElement("div",{className:"cart-item-quantity"},r.a.createElement(m.a,{className:"button-quantity",onClick:function(){return e.handleOnclick("sub",a)},type:"button"}),r.a.createElement("p",null,n),r.a.createElement(m.b,{className:"button-quantity",onClick:function(){return e.handleOnclick("add",a)},type:"button"})),r.a.createElement(m.d,{onClick:function(){return e.handleDeleteCartItem(a)}})))}}]),a}(r.a.Component)),W=Object(h.b)(null,(function(e){return{add:function(t){return e({type:"ADD_QUANTITY_CART_ITEM",payload:t})},decrease:function(t){return e({type:"DECREASE_QUANTITY_CART_ITEM",payload:t})},deleteItem:function(t){return e({type:"DELETE_CART_ITEM",payload:t})}}}))($),H=(a(60),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={totalPrice:0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.cartPrice)(I())}},{key:"componentDidUpdate",value:function(){var e=this.props;(0,e.cartPrice)(e.products)}},{key:"render",value:function(){var e=this,t=this.props,a=t.products,n=t.totalPrice;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement("div",null,0===a.length&&r.a.createElement(B,null),a.length>0&&a.map((function(t){return r.a.createElement(W,{deleteItem:e.deleteItem,key:t.id,product:t,onChange:e.handleOnChange,itemQuantity:t.quantity})})),r.a.createElement("div",{className:"total-price-container"},a.length>0&&r.a.createElement("b",null,r.a.createElement("p",null,"Pre\xe7o total: ".concat(parseFloat(n).toFixed(2)," R$"))))))}}]),a}(r.a.Component)),z=Object(h.b)((function(e){return{products:e.cartReducer.products,totalPrice:e.totalPriceReducer.totalPrice}}),(function(e){return{cartPrice:function(t){return e({type:"UPDATE_CART_PRICE",payload:t})}}}))(H),V=(a(61),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.props.location.state.product,t=e.thumbnail,a=e.title,n=e.price,c=e.attributes,o=this.props.props.location.state.product;return r.a.createElement("div",{className:"product-card"},r.a.createElement("div",{className:"photo-container"},r.a.createElement("img",{src:t,alt:a})),r.a.createElement("div",{className:"product-info-container"},r.a.createElement("h1",null,a),r.a.createElement("h2",null," R$: ".concat(n," ")),r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name,": ").concat(e.value_name))}))),r.a.createElement("br",null),r.a.createElement(L,{product:o})))}}]),a}(r.a.Component)),K=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(V,{props:this.props}))}}]),a}(r.a.Component),X=a(22),Z=(a(62),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(X.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a,n=e.props,r=n.login,c=n.history,o=e.state,u=o.name,l=o.email;r({name:u,email:l}),a={name:u,email:l},localStorage.setItem("user",JSON.stringify(a)),c.push("/busca-livre")},e.handleLogout=function(){e.props.history;localStorage.removeItem("user"),localStorage.removeItem("products")},e.state={name:"",email:"",islogged:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=P();e&&e.name&&this.setState({islogged:!0})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.islogged;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),n?r.a.createElement("div",{className:"logout-container"},r.a.createElement("h3",null,"Voc\xea j\xe1 esta logado, caso queira se deslogar clique no bot\xe3o abaixo"),r.a.createElement("a",{href:"/busca-livre"},r.a.createElement("button",{className:"user-login-logout",onClick:this.handleLogout},"Logout"))):r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"name"},"Nome:",r.a.createElement("input",{onChange:this.handleChange,value:t,type:"text",name:"name"})),r.a.createElement("label",{htmlFor:"name"},"Email:",r.a.createElement("input",{onChange:this.handleChange,value:a,type:"text",name:"email"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:!(a&&t),className:"user-login-logout"},"Login"))))}}]),a}(n.Component)),ee=Object(h.b)(null,(function(e){return{login:function(t){return e(R(t))}}}))(Z);var te=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/busca-livre",exact:!0,component:Y}),r.a.createElement(l.a,{path:"/cart",exact:!0,component:z}),r.a.createElement(l.a,{path:"/produto/:id",render:function(e){return r.a.createElement(K,e)}}),r.a.createElement(l.a,{path:"/signup",render:function(e){return r.a.createElement(ee,e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(17),ne=a(32),re=a(2),ce={products:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH_CART":return Object(re.a)(Object(re.a)({},e),{},{products:t.payload});case"ADD_PRODUCT_TO_CART":return Object(re.a)(Object(re.a)({},e),{},{products:[].concat(Object(N.a)(e.products),[t.payload])});case"DELETE_CART_ITEM":return Object(re.a)(Object(re.a)({},e),{},{products:e.products.filter((function(e){return e.id!==t.payload.id}))});case"ADD_QUANTITY_CART_ITEM":var a=e.products.find((function(e){return e.id===t.payload.id})),n=e.products.indexOf(a);a.quantity+=1;var r=a,c=e.products.map((function(e,t){return t===n?r:e}));return Object(re.a)(Object(re.a)({},e),{},{products:c});case"DECREASE_QUANTITY_CART_ITEM":var o=e.products.find((function(e){return e.id===t.payload.id})),u=e.products.indexOf(o);o.quantity-=1;var l=o,i=e.products.map((function(e,t){return t===u?l:e}));return Object(re.a)(Object(re.a)({},e),{},{products:i});default:return e}},ue={totalPrice:0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CART_PRICE":return Object(re.a)(Object(re.a)({},e),{},{totalPrice:t.payload.reduce((function(e,t){return e+t.price*t.quantity}),0)});default:return e}},ie={categories:[],error:null,categoryId:""},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CATEGORIES_SUCCESS":return Object(re.a)(Object(re.a)({},e),{},{categories:t.payload});case"GET_CATEGORIES_ERROR":return Object(re.a)(Object(re.a)({},e),{},{error:t.payload});case"SELECTED_CATEGORY":return Object(re.a)(Object(re.a)({},e),{},{categoryId:t.payload});default:return e}},pe={products:!1,error:null,loading:!1},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS_LIST":return Object(re.a)(Object(re.a)({},e),{},{loading:!0});case"GET_PRODUCTS_LIST_SUCCESS":return Object(re.a)(Object(re.a)({},e),{},{products:t.payload.results,loading:!1});case"GET_PRODUCTS_LIST_ERROR":return Object(re.a)(Object(re.a)({},e),{},{error:t.payload,loading:!1});default:return e}},me={user:{name:"",email:""}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(re.a)(Object(re.a)({},e),{},{user:t.payload});default:return e}},he=Object(ae.combineReducers)({cartReducer:oe,totalPriceReducer:le,categoriesReducer:se,ProductsListReducer:de,userReducer:fe}),Ee=a(33),be=Object(ae.createStore)(he,Object(ne.composeWithDevTools)(Object(ae.applyMiddleware)(Ee.a)));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h.a,{store:be},r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.16214201.chunk.js.map